<!doctype html>
<html lang="en" xml:lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>AI Chatbot</title>
<style>
body { font-family: system-ui, -apple-system, Segoe UI, Roboto, sansserif; margin: 0; background: #0b1220; color: #e7ecf3; }
.wrap { max-width: 820px; margin: 0 auto; padding: 24px; }
h1 { font-size: 20px; }
.chat { background: #111a2b; border-radius: 14px; padding: 16px; minheight: 50vh; }
.msg { padding: 8px 12px; border-radius: 10px; margin: 6px 0; }
.user { background: #17436b; align-self: flex-end; }
.bot { background: #19263b; }
.row { display: flex; gap: 8px; margin-top: 8px; }
textarea { flex: 1; padding: 10px; border-radius: 10px; border: 1px
solid #22324f; background: #0e1626; color: #e7ecf3; }
button { padding: 10px 14px; border-radius: 10px; border: none;
background: #2d6cdf; color: white; cursor: pointer; }
.meta { font-size: 12px; opacity: 0.8; }
</style>
</head>
<body>
<div class="wrap">
<h1>AI Chatbot</h1>
<div id="chat" class="chat"></div>
<div class="row">
<textarea id="input" rows="2" placeholder="Ask a question..."> 
    </textarea>
    <br>
<button id="send">Send</button>
</div id="Chatbox">
</div>
<script> 
let sessionId = localStorage.getItem('session_id') || null;
const chat = document.getElementById('chat');
const input = document.getElementById('input');
const sendBtn = document.getElementById('send');
function add(role, text){
const div = document.createElement('div');
div.className = `msg ${role}`;
div.innerHTML = text.replace(/\n/g,'<br/>');
chat.appendChild(div);
chat.scrollTop = chat.scrollHeight;
}
async function send(){
const message = input.value.trim();
if(!message) return;
add('user', message);
input.value = '';
const res = await fetch('/chat', { method: 'POST', headers: { 'ContentType': 'application/json' }, body: JSON.stringify({ session_id: sessionId,
message })});
const data = await res.json();
if(!sessionId) { sessionId = data.session_id;
localStorage.setItem('session_id', sessionId); }
add('bot', data.answer + `<div class='meta'>mode: ${data.mode}, sim: $
{data.similarity.toFixed(2)}</div>`);
}
sendBtn.onclick = send;
input.addEventListener('keydown', (e) => { if(e.key === 'Enter' && !
e.shiftKey){ e.preventDefault(); send(); } });
</script>
</body>
</html>
